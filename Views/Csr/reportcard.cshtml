@*   

  <link rel="stylesheet" href="~/css/csr/reportcard.css" asp-append-version="true">
    <div class="report-cards" id="card-report">

        
  </div>



  
  
<script>
  $.ajax({
    url : "/csr-detials",
    method : "GET",
   success : function(response){
        console.log( response); // Shows the array
        if (Array.isArray(response) && response.length > 0) {
            response.forEach(function(item) {
               $('#card-report').append(`
                   <div class="section">
          <div class="section-item">
            <h3>${item.title}</h3>
          <iframe src="${item.filePath}" width="100%" height="300px"></iframe>

            <div class="pdf">
              <a href="${item.filePath}" target="_blank">Download PDF</a>
            </div>
          </div>
        </div>
               `);
            });
        } else {
            console.warn("Response is empty or not an array");
        }
    }
  })
</script> *@


 
 <link rel="stylesheet" href="~/css/policy/policy.css" asp-append-version="true">
  <div class="report-cards" id="policy-report">
     
</div>

<!-- Bootstrap Modal -->
<div class="modal fade" id="pdfModal" tabindex="-1" aria-labelledby="pdfModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="pdfModalLabel">PDF Viewer</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" style="height:80vh;">
        <iframe id="pdfViewer" src="" width="100%" height="100%"></iframe>
      </div>
    </div>
  </div>
</div>

<script>
  
 $.ajax({
  url: "/csr-detials",
  method: "GET",
  success: function(response) {
    if (Array.isArray(response) && response.length > 0) {
      let html = '';
      response.forEach(function(item) {
        html += `
          <div class="card">
            <div class="section-item">
              <h5>${item.title} 
            
              </h5>
             @*   <button class="btn btn-primary view-pdf" data-src="${item.filePath}">View PDF</button></h3> *@
             
              <div class="pdfs">
                <a href="${item.filePath}" target="_blank">Download PDF </a>
                <div class="view-pdf-container card" style="display: flex; align-items: center; justify-content: center; width: 20%; padding: 5px; border-radius: 4px; border:none;">
                
                  <img src="/images/icon/viewpng.png" alt="Icon" class="icon view-pdf" style="width: 80%; height: 80%; cursor: pointer; margin-left: 10px;" data-src="${item.filePath}">
                  </div>
              </div>
            </div> 
          </div>
        `;
      });
      $('#policy-report').html(html);
    } else {
      console.warn("Response is empty or not an array");
    }
  }
});

// Open modal and load PDF
$(document).on('click', '.view-pdf', function() {
  const src = $(this).data('src');
  $('#pdfViewer').attr('src', src);
  $('#pdfModal').modal('show');
});

// Clear PDF when modal closes
$('#pdfModal').on('hidden.bs.modal', function () {
  $('#pdfViewer').attr('src', '');
});

</script>