<link rel="stylesheet" href="~/css/home/loanitem.css" asp-append-version="true">
 <section class="loan-items">
        <div class="item-container">
            <div class="item active" id="gold">
                <img src="images/icon/gold.png" alt="" srcset="">
                <p>Gold Loan</p>
            </div>
            <div class="item" id="business">
                <img src="images/icon/cooperation.png" alt="" srcset="">
                <p>Business Loan</p>
            </div>
            <div class="item" id="cd">
                <img src="images/icon/electric-appliances.png" alt="" srcset="">
                <p>CD Loan</p>
            </div>
            <div class="item" style="border:none;" id="vehicle">
                <img src="images/icon/bike.png" alt="" srcset="">
                <p>Vehicle Loan</p>
            </div>
        </div>
    </section>

       <section class="loan-item-details">
        <div class="detail">
            <p id="detail-para"></p>
          
        <div class="point">
            <ul id="points"></ul>
            <button>Apply Now</button>
        </div>
        </div>
    </section>
<script>
/* 
  document.getElementById('loan-id').addEventListener('change', function () {
        alert('New value: ' + this.value);
    }); */
    // Helper function to set loan-id value and call loan()
 
    // Wait for the DOM and loan data to be ready
    document.addEventListener('DOMContentLoaded', function () {
        // Poll for loanDataCache to be filled by fetchLoanData
        function showGoldLoanWhenReady() {
            if (typeof loanDataCache !== 'undefined' && loanDataCache['gold loan']) {
                // Set Gold Loan as active
                document.getElementById('gold').classList.add('active');
                document.getElementById('business').classList.remove('active');
                document.getElementById('cd').classList.remove('active');
                document.getElementById('vehicle').classList.remove('active');
                // Show Gold Loan details
                if (typeof updateLoanDisplay === 'function') {
                    updateLoanDisplay('Gold Loan');
                }
            } else {
                // Try again in 100ms
                setTimeout(showGoldLoanWhenReady, 100);
            }
        }
        showGoldLoanWhenReady();
    });


window.GetValue = function(loan) {
    $.ajax({
        url : "/Loan-points/" + loan,
        method : "GET", 
        success : function(response){
            console.log(response);
            const data = response.data;

            
            $('#points').empty();

            data.forEach(function(point) {
                $('#points').append(`<li><img src="images/icon/checklist.png" alt="" srcset=""> ${point.point}</li>`);
            });
        }
    });
}

</script>